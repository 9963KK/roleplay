(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(a){if(a.ep)return;a.ep=!0;const r=n(a);fetch(a.href,r)}})();let c=[{id:1,name:"æ™ºæ…§å¯¼å¸ˆ",icon:"ğŸ§™",description:"åšå­¦å¤šæ‰ï¼Œå–„äºè§£ç­”å„ç§é—®é¢˜",personality:"è€å¿ƒã€ç¿æ™ºã€æ¸©å’Œ",createdAt:"2024-01-15",lastActive:"åˆšåˆš",conversationCount:45},{id:2,name:"åˆ›æ„åŠ©æ‰‹",icon:"ğŸ¨",description:"å¯Œæœ‰æƒ³è±¡åŠ›ï¼Œæ“…é•¿åˆ›æ„å’Œè®¾è®¡",personality:"æ´»æ³¼ã€åˆ›æ–°ã€è‰ºæœ¯æ„Ÿå¼º",createdAt:"2024-01-10",lastActive:"5åˆ†é’Ÿå‰",conversationCount:38},{id:3,name:"å•†ä¸šé¡¾é—®",icon:"ğŸ’¼",description:"ä¸“ä¸šå•†åŠ¡ï¼Œæ“…é•¿ç­–ç•¥åˆ†æå’Œå¸‚åœºè§„åˆ’",personality:"ç†æ€§ã€ä¸“ä¸šã€ç›®æ ‡å¯¼å‘",createdAt:"2024-01-05",lastActive:"1å°æ—¶å‰",conversationCount:44}],i=c[0],d={},m=null;function E(){c.forEach(t=>{d[t.id]=[{type:"ai",author:t.name,text:`ä½ å¥½ï¼æˆ‘æ˜¯${t.name}ï¼Œå¾ˆé«˜å…´ä¸ä½ äº¤æµã€‚`,time:"14:25"}]})}function u(){const t=document.getElementById("characterList");t&&(t.innerHTML="",c.forEach(e=>{const n=document.createElement("div");n.className=`character-item ${e.id===i.id?"active":""}`,n.onclick=()=>I(e.id),n.innerHTML=`
      <div class="character-header">
        <div class="character-avatar">${e.icon}</div>
        <div class="character-name">${e.name}</div>
      </div>
      <div class="character-desc">${e.description}</div>
      <div style="font-size: 10px; color: #8b4513; margin-top: 5px;">
        æœ€åå¯¹è¯ï¼š${e.lastActive}
      </div>
    `,t.appendChild(n)}))}function f(){const t=document.getElementById("characterManagement");t&&(t.innerHTML="",c.forEach(e=>{const n=document.createElement("div");n.className="character-card",n.innerHTML=`
      <div class="character-avatar" style="width: 60px; height: 60px; font-size: 30px;">${e.icon}</div>
      <div class="character-card-info">
        <h3>${e.name}</h3>
        <p>æè¿°ï¼š${e.description}</p>
        <p>æ€§æ ¼ï¼š${e.personality}</p>
        <div class="meta">åˆ›å»ºæ—¶é—´ï¼š${e.createdAt}</div>
      </div>
      <div class="character-actions">
        <button class="btn btn-small btn-edit" onclick="editCharacter(${e.id})">ç¼–è¾‘</button>
        <button class="btn btn-small btn-delete" onclick="deleteCharacter(${e.id})">åˆ é™¤</button>
      </div>
    `,t.appendChild(n)}))}function I(t){const e=c.find(a=>a.id===t);if(!e)return;i=e,u(),g(t);const n=document.getElementById("currentCharacterAvatar"),o=document.getElementById("currentCharacterName");n&&(n.textContent=i.icon),o&&(o.textContent=i.name)}function g(t){const e=document.getElementById("chatMessages");if(!e)return;e.innerHTML="",(d[t]||[]).forEach(o=>{v(o)}),e.scrollTop=e.scrollHeight}function v(t){const e=document.getElementById("chatMessages");if(!e)return;const n=document.createElement("div");n.className=`message ${t.type}`;const o=t.type==="ai"?i.icon:"ğŸ‘¤";n.innerHTML=`
    <div class="message-avatar">${o}</div>
    <div class="message-content">
      ${t.type==="ai"?`<div class="message-author">${t.author}</div>`:""}
      <div class="message-text">${t.text}</div>
      <div class="message-time">${t.time}</div>
    </div>
  `,e.appendChild(n)}function y(){const t=document.getElementById("messageInput");if(!t)return;const e=t.value.trim();if(!e)return;const n={type:"user",text:e,time:new Date().toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})};d[i.id].push(n),v(n),t.value="",setTimeout(()=>{const o={type:"ai",author:i.name,text:w(e,i),time:new Date().toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})};d[i.id].push(o),v(o);const a=document.getElementById("chatMessages");a&&(a.scrollTop=a.scrollHeight),h()},1e3)}function w(t,e){const o={æ™ºæ…§å¯¼å¸ˆ:["è¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰è¶£çš„é—®é¢˜ï¼Œè®©æˆ‘æ¥ä¸ºä½ è¯¦ç»†è§£ç­”ã€‚","ä»æˆ‘çš„ç»éªŒæ¥çœ‹ï¼Œè¿™ä¸ªé—®é¢˜æœ‰å‡ ä¸ªå…³é”®ç‚¹éœ€è¦è€ƒè™‘ã€‚","ä½ æå‡ºäº†ä¸€ä¸ªå¾ˆå¥½çš„è§‚ç‚¹ï¼Œæˆ‘å»ºè®®ä½ å¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢æ·±å…¥æ€è€ƒã€‚"],åˆ›æ„åŠ©æ‰‹:["å“‡ï¼è¿™ä¸ªæƒ³æ³•å¤ªæœ‰åˆ›æ„äº†ï¼æˆ‘æœ‰ä¸€äº›æ›´æœ‰è¶£çš„å»ºè®®ç»™ä½ ã€‚","è®©æˆ‘å‘æŒ¥ä¸€ä¸‹æƒ³è±¡åŠ›ï¼Œæˆ‘è§‰å¾—å¯ä»¥è¿™æ ·è®¾è®¡...","è¿™ä¸ªæ¦‚å¿µå¾ˆæ£’ï¼æˆ‘ä»¬å¯ä»¥åŠ å…¥æ›´å¤šåˆ›æ–°çš„å…ƒç´ ã€‚"],å•†ä¸šé¡¾é—®:["ä»å•†ä¸šè§’åº¦åˆ†æï¼Œè¿™ä¸ªæ–¹æ¡ˆæœ‰å‡ ä¸ªä¼˜åŠ¿å’Œéœ€è¦æ³¨æ„çš„é£é™©ã€‚","æ ¹æ®å¸‚åœºè°ƒç ”æ•°æ®ï¼Œæˆ‘å»ºè®®é‡‡ç”¨ä»¥ä¸‹ç­–ç•¥æ¥ä¼˜åŒ–è¿™ä¸ªé¡¹ç›®ã€‚","è¿™ä¸ªæŠ•èµ„æœºä¼šçœ‹èµ·æ¥å¾ˆæœ‰æ½œåŠ›ï¼Œä½†æˆ‘ä»¬éœ€è¦ä»”ç»†è¯„ä¼°ROIã€‚"]}[e.name]||["è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é—®é¢˜ï¼Œè®©æˆ‘ä¸ºä½ åˆ†æä¸€ä¸‹ã€‚"];return o[Math.floor(Math.random()*o.length)]}function B(t){t.key==="Enter"&&(t.preventDefault(),y())}function M(){const t=document.getElementById("chatInterface"),e=document.getElementById("settingsInterface");t==null||t.classList.remove("active"),e==null||e.classList.add("active")}function L(){const t=document.getElementById("chatInterface"),e=document.getElementById("settingsInterface");e==null||e.classList.remove("active"),t==null||t.classList.add("active")}function b(t,e){document.querySelectorAll(".menu-item").forEach(n=>{n.classList.remove("active")}),t.currentTarget.classList.add("active"),console.log("åˆ‡æ¢åˆ°æ ‡ç­¾é¡µ:",e)}function x(){m=null;const t=document.getElementById("modalTitle");t.textContent="æ·»åŠ æ–°äººç‰©",document.getElementById("characterForm").reset(),document.getElementById("characterModal").style.display="block"}function A(t){const e=c.find(n=>n.id===t);e&&(m=t,document.getElementById("modalTitle").textContent="ç¼–è¾‘äººç‰©",document.getElementById("characterName").value=e.name,document.getElementById("characterIcon").value=e.icon,document.getElementById("characterDesc").value=e.description,document.getElementById("characterPersonality").value=e.personality,document.getElementById("characterModal").style.display="block")}function T(t){confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªäººç‰©å—ï¼Ÿ")&&(c=c.filter(e=>e.id!==t),delete d[t],i.id===t&&c.length>0&&(i=c[0]),u(),f(),h(),c.length>0&&(g(i.id),document.getElementById("currentCharacterAvatar").textContent=i.icon,document.getElementById("currentCharacterName").textContent=i.name))}function p(){document.getElementById("characterModal").style.display="none"}function h(){const t=c.length,e=Object.values(d).reduce((s,l)=>s+l.filter(C=>C.type==="user").length,0),n=c.reduce((s,l)=>s.conversationCount>l.conversationCount?s:l,c[0]),o=document.getElementById("totalCharacters"),a=document.getElementById("totalConversations"),r=document.getElementById("mostActive");o&&(o.textContent=t),a&&(a.textContent=e),r&&(r.textContent=n?n.name:"æ— ")}function $(){alert("é™„ä»¶åŠŸèƒ½å¼€å‘ä¸­...")}document.addEventListener("DOMContentLoaded",()=>{E(),u(),f(),g(i.id),h();const t=document.getElementById("characterForm");t==null||t.addEventListener("submit",e=>{e.preventDefault();const n={name:document.getElementById("characterName").value,icon:document.getElementById("characterIcon").value,description:document.getElementById("characterDesc").value,personality:document.getElementById("characterPersonality").value};if(m){const o=c.find(a=>a.id===m);o&&Object.assign(o,n)}else{const o={id:Date.now(),...n,createdAt:new Date().toISOString().split("T")[0],lastActive:"åˆšåˆš",conversationCount:0};c.push(o),d[o.id]=[]}u(),f(),h(),p()})});window.showSettings=M;window.showChat=L;window.showSettingsTab=b;window.showAddCharacterModal=x;window.editCharacter=A;window.deleteCharacter=T;window.closeCharacterModal=p;window.sendMessage=y;window.handleKeyPress=B;window.attachFile=$;
